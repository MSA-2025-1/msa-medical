<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.emr.slgi.reception.dao.ReceptionDAO">
  <insert id="acceptPatientByStaff">
    INSERT INTO
        TB_RECEPTION
            (
                PATIENT_UUID,
                DOCTOR_UUID,
                NAME,
                RRN,
                SYMPTOM,
                CREATE_DATE
            )
    VALUES
        (
            #{patientUuid},
            #{doctorUuid},
            #{patientName},
            #{rrn},
            #{symptom},
            #{dateTime}
        )
  </insert>

    <select id="getWaitingList">
        SELECT
            UUID, PATIENT_UUID, NAME, STATUS, CREATE_DATE
        FROM
            TB_RECEPTION
        WHERE
            DOCTOR_UUID = #{doctorUuid}
            AND
            STATUS IN ('RE01')
--         오늘 날짜만 조회하기 위해 설정했지만 테스트위해 일단 생략
--             AND
--             CREATE_DATE BETWEEN CURDATE() AND CURDATE() + INTERVAL 1 DAY
        ORDER BY
            CREATE_DATE;
    </select>

    <update id="cancelReception">
        UPDATE
            TB_RECEPTION
        SET
            STATUS = 'RE02'
        WHERE
            UUID = #{uuid}
    </update>

<!--    어디로 옮겨야할지 팀장님과 상의하기-->
    <select id="getReceptionStatusList">
        SELECT
            ID, NAME
        FROM
            TB_STATUS_CODE
        WHERE
            GROUP_ID = 4;
    </select>

</mapper>
